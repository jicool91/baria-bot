# –ë–∞—Ä–∏–∞—Ç—Ä–∏—á–µ—Å–∫–∏–π –ë–æ—Ç

–¢–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç –¥–ª—è –ø–æ—Å—Ç–±–∞—Ä–∏–∞—Ç—Ä–∏—á–µ—Å–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ —Å —Å–∏—Å—Ç–µ–º–æ–π –≤–µ–¥–µ–Ω–∏—è –≤—Ä–∞—á–∞–º–∏.

## –¶–µ–ª–∏ –∏ –≥—Ä–∞–Ω–∏—Ü—ã

### –û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å
–¢–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç –¥–ª—è –ø–æ—Å—Ç–±–∞—Ä–∏–∞—Ç—Ä–∏—á–µ—Å–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–π:
- –°–æ–±–∏—Ä–∞–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å –ø–∞—Ü–∏–µ–Ω—Ç–∞ –∏ –≤–µ–¥–µ—Ç –∏—Å—Ç–æ—Ä–∏—é
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–ª–∞–Ω—ã –ø–∏—Ç–∞–Ω–∏—è –ø–æ —Ñ–∞–∑–∞–º –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è (–≤–æ–¥–∞/–ø—Ä–∏—ë–º—ã –ø–∏—â–∏/–≤–∏—Ç–∞–º–∏–Ω—ã)
- –î–∞–µ—Ç –ò–ò-–æ—Ç–≤–µ—Ç—ã —Å—Ç—Ä–æ–≥–æ –ø–æ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–º –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º
- –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–≤—è–∑—å –ø–∞—Ü–∏–µ–Ω—Ç–∞ —Å –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã–º –≤—Ä–∞—á–æ–º
- –†–µ–∞–ª–∏–∑—É–µ—Ç –±–∞–∑–æ–≤—É—é —Ç—Ä–∏–∞–∂-–ª–æ–≥–∏–∫—É —Å–∏–º–ø—Ç–æ–º–æ–≤ —Å red-flags

### –ß—Ç–æ –ù–ï –¥–µ–ª–∞–µ—Ç
- –ù–µ —Å—Ç–∞–≤–∏—Ç –¥–∏–∞–≥–Ω–æ–∑—ã
- –ù–µ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç –ª–µ–∫–∞—Ä—Å—Ç–≤–∞ –∏ –¥–æ–∑–∏—Ä–æ–≤–∫–∏
- –ù–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —ç–∫—Å—Ç—Ä–µ–Ω–Ω—É—é –º–µ–¥–∏—Ü–∏–Ω—Å–∫—É—é –ø–æ–º–æ—â—å

### –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- –î–∏—Å–∫–ª–µ–π–º–µ—Ä –≤ –∫–∞–∂–¥–æ–º –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–º –æ—Ç–≤–µ—Ç–µ
- –°–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–∞–≤–æ –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

## UX-—Ñ–ª–æ—É –∏ –∫–æ–º–∞–Ω–¥—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
- `/start` ‚Äî –≤—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
- `/menu` ‚Äî –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- `/profile` ‚Äî –ø—Ä–æ—Ñ–∏–ª—å –∏ —Ç–µ–∫—É—â–∞—è —Ñ–∞–∑–∞
- `/plan` ‚Äî –ø–ª–∞–Ω –ø–∏—Ç–∞–Ω–∏—è (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è/—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è)
- `/reminders` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
- `/doctor` ‚Äî —Å–≤—è–∑—å —Å –≤—Ä–∞—á–æ–º
- `/symptoms` ‚Äî —Å–æ–æ–±—â–∏—Ç—å –æ —Å–∏–º–ø—Ç–æ–º–∞—Ö
- `/help` ‚Äî –ø–æ–º–æ—â—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- `/erase_me` ‚Äî —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ

### –°—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω (/start)

```
–ü—Ä–∏–≤–µ—Ç! –Ø –ø–æ–º–æ–≥—É —Å —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ–º –ø–æ—Å–ª–µ –±–∞—Ä–∏–∞—Ç—Ä–∏—á–µ—Å–∫–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏.
–î–ª—è –Ω–∞—á–∞–ª–∞ –Ω—É–∂–Ω–æ –ø—Ä–æ–π—Ç–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∏ –ø—Ä–∏–≤—è–∑–∞—Ç—å—Å—è –∫ –≤—Ä–∞—á—É.
```

**–ö–Ω–æ–ø–∫–∏:**
- ü©∫ –ù–∞—á–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é ‚Üí ONBOARDING_CONSENT
- ‚ÑπÔ∏è –û –±–æ—Ç–µ ‚Üí INFO

### –ü—Ä–æ—Ü–µ—Å—Å –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞

#### 1. –°–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–∞–Ω–Ω—ã—Ö
```
–î–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–º–æ—â–∏ –Ω—É–∂–Ω–æ –≤–∞—à–µ —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–∞–Ω–Ω—ã—Ö.
‚ö†Ô∏è –ë–æ—Ç –Ω–µ –¥–∞–µ—Ç –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π. –ü—Ä–∏ —É—Ö—É–¥—à–µ–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è ‚Äî –∫ –≤—Ä–∞—á—É.
```

**–ö–Ω–æ–ø–∫–∏:**
- ‚úÖ –°–æ–≥–ª–∞—Å–µ–Ω ‚Üí ONBOARDING_START
- ‚ùå –ù–µ —Å–æ–≥–ª–∞—Å–µ–Ω ‚Üí –≤–æ–∑–≤—Ä–∞—Ç –∫ –Ω–∞—á–∞–ª—É

#### 2. –î–∞–Ω–Ω—ã–µ –ø–∞—Ü–∏–µ–Ω—Ç–∞ (FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è)
1. **–ö–æ–¥ –≤—Ä–∞—á–∞** ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–¥ –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –≤—Ä–∞—á—É
2. **–î–∞—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏** (–∫–∞–ª–µ–Ω–¥–∞—Ä—å/–≤–≤–æ–¥)
3. **–ê–Ω—Ç—Ä–æ–ø–æ–º–µ—Ç—Ä–∏—è**: —Ä–æ—Å—Ç (—Å–º), –≤–µ—Å (–∫–≥)
4. **–¶–µ–ª—å**: [–°–Ω–∏–∂–µ–Ω–∏–µ –≤–µ—Å–∞/–£–¥–µ—Ä–∂–∞–Ω–∏–µ –≤–µ—Å–∞/–ù–∞–±–æ—Ä –±–µ–ª–∫–∞]
5. **–¢–µ–∫—É—â–∞—è —Ñ–∞–∑–∞**: [–ñ–∏–¥–∫–∞—è/–ü—é—Ä–µ/–ú—è–≥–∫–∞—è/–û–±—ã—á–Ω–∞—è] –∏–ª–∏ "–ê–≤—Ç–æ—Ä–∞—Å—á—ë—Ç –ø–æ –¥–∞—Ç–µ"
6. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**: —á–µ–∫–±–æ–∫—Å—ã (–ª–∞–∫—Ç–æ–∑–∞, –≥–ª—é—Ç–µ–Ω, –≤–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω—Å—Ç–≤–æ, —Ä–µ–ª–∏–≥–∏–æ–∑–Ω—ã–µ –∏ –ø—Ä.)
7. **–¢–µ–∫—É—â–∏–µ —Å–∏–º–ø—Ç–æ–º—ã**: [–Ω–µ—Ç/—Ç–æ—à–Ω–æ—Ç–∞/–±–æ–ª—å –≤ –∂–∏–≤–æ—Ç–µ/–∏–∑–∂–æ–≥–∞/–∑–∞–ø–æ—Ä/–¥–∏–∞—Ä–µ—è] (–º—É–ª—å—Ç–∏–≤—ã–±–æ—Ä)
8. **–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å**: –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–ª–∏ –≤—ã–±–æ—Ä
9. **–í–∏—Ç–∞–º–∏–Ω—ã/–¥–æ–±–∞–≤–∫–∏**: —Å–ø–∏—Å–æ–∫ –ø—Ä–∏–Ω–∏–º–∞–µ–º—ã—Ö –ø—Ä–µ–ø–∞—Ä–∞—Ç–æ–≤

#### 3. –†–µ–∑—é–º–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
**–ö–Ω–æ–ø–∫–∏:**
- üìÖ –ü–æ–ª—É—á–∏—Ç—å –ø–ª–∞–Ω –ø–∏—Ç–∞–Ω–∏—è (7 –¥–Ω–µ–π) ‚Üí PLAN_GENERATE
- üîî –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è ‚Üí REMINDERS_SETUP
- ü©∫ –°–≤—è–∑–∞—Ç—å—Å—è —Å –≤—Ä–∞—á–æ–º ‚Üí DOCTOR_CONTACT
- ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è ‚Üí PROFILE_SETTINGS

## –°–∏—Å—Ç–µ–º–∞ —Ç—Ä–∏–∞–∂–∞ —Å–∏–º–ø—Ç–æ–º–æ–≤

### Red-flags (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —á–µ–∫-–ª–∏—Å—Ç)
–ü—Ä–∏ —Å–æ–æ–±—â–µ–Ω–∏–∏ –æ —Å–∏–º–ø—Ç–æ–º–∞—Ö –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤:

**–í–æ–ø—Ä–æ—Å—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ (–î–∞/–ù–µ—Ç):**
- –°–∏–ª—å–Ω–∞—è/–Ω–∞—Ä–∞—Å—Ç–∞—é—â–∞—è –±–æ–ª—å >7/10?
- –†–≤–æ—Ç–∞ —Å –∫—Ä–æ–≤—å—é/"–∫–æ—Ñ–µ–π–Ω–∞—è –≥—É—â–∞"?
- –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ >38.5¬∞C?
- –¢–∞—Ö–∏–∫–∞—Ä–¥–∏—è/–≥–æ–ª–æ–≤–æ–∫—Ä—É–∂–µ–Ω–∏–µ/–ø–æ—Ç–µ—Ä—è —Å–æ–∑–Ω–∞–Ω–∏—è?
- –ö—Ä–æ–≤—å –≤ —Å—Ç—É–ª–µ (—è—Ä–∫–∞—è/—á–µ—Ä–Ω–∞—è)?
- –ë–æ–ª—å –≤ –≥—Ä—É–¥–∏/–æ–¥—ã—à–∫–∞?

### –ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ red-flags
```
–≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–ø–∞—Å–Ω–æ. –Ø –Ω–µ —Å—Ç–∞–≤–ª—é –¥–∏–∞–≥–Ω–æ–∑—ã.
–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∑–∞ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–π –ø–æ–º–æ—â—å—é.
```

**–ö–Ω–æ–ø–∫–∏:**
- üìû –í—ã–∑–≤–∞—Ç—å —Å–∫–æ—Ä—É—é (103/112)
- ü©∫ –°–≤—è–∑–∞—Ç—å—Å—è —Å –≤—Ä–∞—á–æ–º
- üìç –ë–ª–∏–∂–∞–π—à–∏–µ –∫–ª–∏–Ω–∏–∫–∏
- üìù –ü–∞–º—è—Ç–∫–∞ —Å–∏–º–ø—Ç–æ–º–æ–≤ (PDF)

### –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ red-flags
- –ò–ò-–æ—Ç–≤–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å–∞–º–æ–ø–æ–º–æ—â–∏ (–±–µ–∑ –ª–µ–∫–∞—Ä—Å—Ç–≤)
- –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è 24-48 —á–∞—Å–æ–≤

**–ö–Ω–æ–ø–∫–∏:**
- üîî –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å —Å–∏–º–ø—Ç–æ–º 48 —á (–Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ + –¥–Ω–µ–≤–Ω–∏–∫)
- ü©∫ –°–≤—è–∑–∞—Ç—å—Å—è —Å –≤—Ä–∞—á–æ–º
- üìù –ü–∞–º—è—Ç–∫–∞ –¥–ª—è –≤–∏–∑–∏—Ç–∞ –∫ –≤—Ä–∞—á—É (PDF)

## –ü–ª–∞–Ω –ø–∏—Ç–∞–Ω–∏—è

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–ª–∞–Ω–∞
- –£—á–∏—Ç—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â—É—é —Ñ–∞–∑—É –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- –£—á–∏—Ç—ã–≤–∞–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ –ø–∏—Ç–∞–Ω–∏—é
- –£—á–∏—Ç—ã–≤–∞–µ—Ç —Ü–µ–ª—å –ø–æ –±–µ–ª–∫—É
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–ª–∞–Ω –Ω–∞ –¥–µ–Ω—å/–Ω–µ–¥–µ–ª—é

### –§—É–Ω–∫—Ü–∏–∏ –ø–ª–∞–Ω–∞
**–ö–Ω–æ–ø–∫–∏ (–Ω–∞ –¥–µ–Ω—å):**
- üìÑ –î–µ—Ç–∞–ª–∏ –±–ª—é–¥–∞
- üîÅ –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–µ–Ω—å
- ‚¨ÖÔ∏è –ù–µ–¥–µ–ª—è / ‚û°Ô∏è –°–ª–µ–¥. –¥–µ–Ω—å
- ü©∫ –í–æ–ø—Ä–æ—Å –≤—Ä–∞—á—É –ø–æ –ø–∏—Ç–∞–Ω–∏—é

## –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è

### –¢–∏–ø—ã –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
- **–í–æ–¥–∞**: –∫–∞–∂–¥—ã–π —á–∞—Å 9:00‚Äì20:00
- **–ü–∏—Ç–∞–Ω–∏–µ**: 4‚Äì6 –ø—Ä–∏–µ–º–æ–≤ –ø–∏—â–∏
- **–í–∏—Ç–∞–º–∏–Ω—ã**: 1‚Äì2 —Ä–∞–∑–∞ –≤ –¥–µ–Ω—å
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏–º–ø—Ç–æ–º–æ–≤**: –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞
- –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –ø–æ —Ç–∏–ø–∞–º
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ –∏ –≤—Ä–µ–º–µ–Ω–∏
- –£—á–µ—Ç —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –í—Ä–µ–º–µ–Ω–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –¥–µ–Ω—å

## –°–≤—è–∑—å —Å –≤—Ä–∞—á–æ–º

### –§—É–Ω–∫—Ü–∏–∏
- –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–Ω–æ–º—É –≤—Ä–∞—á—É
- –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ç –≤—Ä–∞—á–∞
- –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–Ω–µ–≤–Ω–∏–∫–∞ (–≤–µ—Å, —Å–∏–º–ø—Ç–æ–º—ã, –ø–ª–∞–Ω –ø–∏—Ç–∞–Ω–∏—è)
- –ó–∞–ø—Ä–æ—Å –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤—Ä–∞—á–µ–π
- –°–ø–∏—Å–æ–∫ –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã—Ö –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤
- –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π —Å –ø–∞—Ü–∏–µ–Ω—Ç–∞–º–∏
- –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ—Ñ–∏–ª–µ–π –∏ –¥–Ω–µ–≤–Ω–∏–∫–æ–≤ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤
- –ë—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
1. **Telegram Bot** (Java 17, Spring Boot, TelegramBots 9+)
   - FSM/–¥–∏–∞–ª–æ–≥–∏, –º–µ–Ω—é, inline-–∫–Ω–æ–ø–∫–∏
   - –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –∫–æ–º–∞–Ω–¥
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å RAG-—Å–µ—Ä–≤–∏—Å–æ–º –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–º

2. **RAG-—Å–µ—Ä–≤–∏—Å** (FastAPI/Python)
   - –≠–º–±–µ–¥–¥–∏–Ω–≥–∏ (bge-m3/e5-small)
   - –ü–æ–∏—Å–∫ –ø–æ pgvector —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –ø–æ —Ñ–∞–∑–∞–º
   - LLM (Ollama llama3.1:8b)
   - –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–º–ø—Ç–æ–≤ –∏ –≥–∞—Ä–¥—Ä–µ–π–ª–æ–≤

3. **PostgreSQL + pgvector**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –ø—Ä–æ—Ñ–∏–ª–∏
   - –°–≤—è–∑–∏ –≤—Ä–∞—á-–ø–∞—Ü–∏–µ–Ω—Ç
   - –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è (RRULE)
   - –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π (KB chunks)
   - –õ–æ–≥–∏ –∏ –∞—É–¥–∏—Ç

4. **Admin-–ø–∞–Ω–µ–ª—å**
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Ä–∞—á–∞–º–∏ –∏ –ø–∞—Ü–∏–µ–Ω—Ç–∞–º–∏
   - –ó–∞–≥—Ä—É–∑–∫–∞ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤
   - –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –∏ –º–æ–¥–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

5. **Scheduler** (Quartz –≤ Spring)
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ —á–∞—Å–æ–≤—ã–º –ø–æ—è—Å–∞–º
   - –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –ø–æ RRULE

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- Bot ‚áÑ RAG: POST /ask
- Bot ‚áÑ Admin API: CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
- Admin UI ‚áÑ KB Parser: –∑–∞–≥—Ä—É–∑–∫–∞ –∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤

## –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

```sql
-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
CREATE TABLE app_user (
  id BIGSERIAL PRIMARY KEY,
  tg_id BIGINT UNIQUE NOT NULL,
  role TEXT DEFAULT 'patient', -- patient/doctor/admin
  consent_at TIMESTAMP,
  tz TEXT,
  surgery_date DATE,
  phase TEXT, -- liquid/pureed/soft/regular
  phase_mode TEXT DEFAULT 'auto', -- auto/manual
  height_cm INT,
  weight_kg NUMERIC(5,2),
  goal TEXT, -- lose/maintain/protein
  restrictions JSONB,
  supplements JSONB,
  created_at TIMESTAMP DEFAULT now(),
  updated_at TIMESTAMP DEFAULT now()
);

-- –°–≤—è–∑–∏ –≤—Ä–∞—á-–ø–∞—Ü–∏–µ–Ω—Ç
CREATE TABLE doctor_patient (
  id BIGSERIAL PRIMARY KEY,
  doctor_id BIGINT REFERENCES app_user(id),
  patient_id BIGINT REFERENCES app_user(id),
  doctor_code TEXT, -- —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–¥ –≤—Ä–∞—á–∞ –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏
  created_at TIMESTAMP DEFAULT now()
);

-- –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
CREATE TABLE reminder (
  id BIGSERIAL PRIMARY KEY,
  user_id BIGINT REFERENCES app_user(id),
  type TEXT, -- water/meal/supplement/symptom_watch
  rrule TEXT, -- iCal RRULE
  local_time TEXT,
  is_enabled BOOLEAN DEFAULT TRUE,
  meta JSONB,
  created_at TIMESTAMP DEFAULT now()
);

-- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏–º–ø—Ç–æ–º–æ–≤
CREATE TABLE symptom_log (
  id BIGSERIAL PRIMARY KEY,
  user_id BIGINT REFERENCES app_user(id),
  symptom TEXT,
  started_at TIMESTAMP,
  status TEXT, -- active/resolved
  notes TEXT
);

-- –°–æ–æ–±—â–µ–Ω–∏—è –≤—Ä–∞—á-–ø–∞—Ü–∏–µ–Ω—Ç
CREATE TABLE doctor_message (
  id BIGSERIAL PRIMARY KEY,
  from_user_id BIGINT REFERENCES app_user(id),
  to_user_id BIGINT REFERENCES app_user(id),
  message_text TEXT,
  message_type TEXT, -- text/plan/symptoms/weight
  meta JSONB,
  read_at TIMESTAMP,
  created_at TIMESTAMP DEFAULT now()
);

-- –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π
CREATE TABLE kb_chunk (
  id BIGSERIAL PRIMARY KEY,
  phase TEXT,
  content TEXT NOT NULL,
  source TEXT,
  last_reviewed DATE,
  embedding VECTOR(1024)
);

-- –ê—É–¥–∏—Ç RAG-–∑–∞–ø—Ä–æ—Å–æ–≤
CREATE TABLE rag_audit (
  id BIGSERIAL PRIMARY KEY,
  user_id BIGINT,
  user_query TEXT,
  retrieved_ids BIGINT[],
  answer TEXT,
  sources TEXT[],
  safety_flags TEXT[],
  created_at TIMESTAMP DEFAULT now()
);
```

## API –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã

### RAG-—Å–µ—Ä–≤–∏—Å

#### POST /ask
```json
{
  "q": "–ú–æ–∂–Ω–æ –ª–∏ –∫–æ—Ñ–µ –Ω–∞ –ø—é—Ä–µ-—Ñ–∞–∑–µ?",
  "user": {
    "phase": "pureed",
    "restrictions": ["lactose_free"],
    "goal": "protein"
  },
  "options": {
    "max_chunks": 6,
    "language": "ru"
  }
}
```

**Response:**
```json
{
  "answer": "–ö—Ä–∞—Ç–∫–∏–π –æ—Ç–≤–µ—Ç —Å –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–º–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏...",
  "sources": ["–ü—Ä–æ—Ç–æ–∫–æ–ª_1.4_2025", "FAQ_–ü–∏—Ç–∞–Ω–∏–µ"],
  "used_chunks": [123, 124, 131],
  "safety": {
    "red_flags": false,
    "medical_claims_blocked": false,
    "phase_violation": false
  }
}
```

## –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–º–ø—Ç–æ–≤ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### System Prompt
```
–¢—ã ‚Äî –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –ø–æ –ø–æ—Å–ª–µ–æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–º—É –ø–∏—Ç–∞–Ω–∏—é –¥–ª—è –±–∞—Ä–∏–∞—Ç—Ä–∏—á–µ—Å–∫–∏—Ö –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤.
–û—Ç–≤–µ—á–∞–π –¢–û–õ–¨–ö–û –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.
–ù–ï —Å—Ç–∞–≤—å –¥–∏–∞–≥–Ω–æ–∑—ã, –ù–ï –Ω–∞–∑–Ω–∞—á–∞–π –ª–µ–∫–∞—Ä—Å—Ç–≤–∞, –ù–ï –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–π –∞–Ω–∞–ª–∏–∑—ã.
–í—Å–µ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞–π —Ñ–∞–∑—É –ø–∏—Ç–∞–Ω–∏—è –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è.
–í –∫–æ–Ω—Ü–µ –¥–æ–±–∞–≤–ª—è–π: "–û—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞: <–∏—Å—Ç–æ—á–Ω–∏–∫–∏>. –≠—Ç–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–ø—Ä–∞–≤–∫–∞, –Ω–µ –º–µ–¥—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è."
```

### –ì–∞—Ä–¥—Ä–µ–π–ª—ã
- **–î–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏**: —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ —Ñ–∞–∑–∞–º/–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º
- **–ü–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏**: –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π
- **Red-flags**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç–≤–µ—Ç –±–µ–∑ LLM

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –¥–∏—Å–∫–ª–µ–π–º–µ—Ä
```
"–û—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞: {{sources}}. –≠—Ç–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–ø—Ä–∞–≤–∫–∞ –ø–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º –∏ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–π —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–µ–π. –ü—Ä–∏ —É—Ö—É–¥—à–µ–Ω–∏–∏ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏—è –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –≤—Ä–∞—á—É."
```

## FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è

```java
public enum BotState {
    START, MAIN_MENU,
    
    // –û–Ω–±–æ—Ä–¥–∏–Ω–≥
    ONBOARDING_CONSENT, ONBOARDING_DOCTOR_CODE, ONBOARDING_DATE, 
    ONBOARDING_MEASURES, ONBOARDING_PHASE, ONBOARDING_RESTRICTIONS, 
    ONBOARDING_SYMPTOMS, ONBOARDING_TZ, ONBOARDING_SUPPS, ONBOARDING_SUMMARY,
    
    // –°–∏–º–ø—Ç–æ–º—ã
    SYMPTOM_TRIAGE, URGENT_ALERT, SYMPTOM_SELFCARE,
    
    // –í—Ä–∞—á
    DOCTOR_CONTACT, DOCTOR_CHAT,
    
    // –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
    REMINDERS_SETUP, REMINDERS_ACTIVE,
    
    // –ü–ª–∞–Ω –ø–∏—Ç–∞–Ω–∏—è
    PLAN_VIEW, PLAN_GENERATE
}
```

## –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### Docker Compose
```yaml
services:
  db:
    image: pgvector/pgvector:pg16
    environment:
      POSTGRES_DB: baria
      POSTGRES_USER: app
      POSTGRES_PASSWORD: app
    
  rag:
    build: ./rag
    environment:
      DB_URL: postgresql://app:app@db:5432/baria
      OLLAMA_URL: http://ollama:11434
    
  ollama:
    image: ollama/ollama:latest
    volumes: ["ollama:/root/.ollama"]
    
  bot:
    build: ./bot
    environment:
      DB_URL: jdbc:postgresql://db:5432/baria
      RAG_URL: http://rag:8000
      TELEGRAM_BOT_TOKEN: ${TELEGRAM_BOT_TOKEN}
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∫–æ–º–ø–ª–∞–µ–Ω—Å

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- –Ø–≤–Ω–æ–µ —Å–æ–≥–ª–∞—Å–∏–µ —Å —Ç–∞–π–º—Å—Ç–∞–º–ø–æ–º
- –ü—Ä–∞–≤–æ –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ: `/erase_me`
- –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –î–µ–ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –ª–æ–≥–æ–≤

### –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- Red-flags –±–µ–∑ —É—á–∞—Å—Ç–∏—è LLM
- –ó–∞–ø—Ä–µ—Ç –Ω–∞ –¥–∏–∞–≥–Ω–æ–∑—ã –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –¥–∏—Å–∫–ª–µ–π–º–µ—Ä—ã
- –≠—Å–∫–∞–ª–∞—Ü–∏—è –∫ –≤—Ä–∞—á—É –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–∏–º–ø—Ç–æ–º–∞—Ö

## –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ú–µ—Ç—Ä–∏–∫–∏
- –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –≤—Ä–∞—á–∏
- –ö–æ–Ω–≤–µ—Ä—Å–∏—è –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞
- –ß–∞—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π
- –ö–∞—á–µ—Å—Ç–≤–æ RAG-–æ—Ç–≤–µ—Ç–æ–≤
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –≤—Ä–∞—á–µ–π

### –ö–∞—á–µ—Å—Ç–≤–æ ML
- Faithfulness ‚â• 0.9
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –Ω–∞—Ä—É—à–µ–Ω–∏–π
- –≠–∫—Å–ø–µ—Ä—Ç–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ ‚â• 4/5

## –ü–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è

### MVP (2-3 –Ω–µ–¥–µ–ª–∏)
- [x] –ë–∞–∑–æ–≤—ã–π –±–æ—Ç —Å FSM
- [x] –û–Ω–±–æ—Ä–¥–∏–Ω–≥ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤
- [x] RAG-—Å–µ—Ä–≤–∏—Å —Å –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º–∏
- [x] –°–∏—Å—Ç–µ–º–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
- [ ] –°–≤—è–∑—å –≤—Ä–∞—á-–ø–∞—Ü–∏–µ–Ω—Ç
- [ ] –¢—Ä–∏–∞–∂ —Å–∏–º–ø—Ç–æ–º–æ–≤

### –†–∞–∑–≤–∏—Ç–∏–µ (4-6 –Ω–µ–¥–µ–ª—å)
- [ ] –ü–ª–∞–Ω—ã –ø–∏—Ç–∞–Ω–∏—è —Å –ò–ò
- [ ] –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è –≤—Ä–∞—á–µ–π
- [ ] –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤
- [ ] –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∫–æ–Ω—Ç–µ–Ω—Ç—É

### –û—Ç –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–π –∫–æ–º–∞–Ω–¥—ã
1. –ü—Ä–æ—Ç–æ–∫–æ–ª—ã –ø–∏—Ç–∞–Ω–∏—è –ø–æ —Ñ–∞–∑–∞–º (PDF/DOCX)
2. –°–ø–∏—Å–æ–∫ red-flags —Å–∏–º–ø—Ç–æ–º–æ–≤
3. FAQ –ø–æ —Ç–∏–ø–æ–≤—ã–º –≤–æ–ø—Ä–æ—Å–∞–º
4. –¢–µ–∫—Å—Ç—ã –¥–∏—Å–∫–ª–µ–π–º–µ—Ä–æ–≤
5. –¢–µ—Å—Ç–æ–≤—ã–µ –∫–µ–π—Å—ã (50+ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤)

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Java 17+, Spring Boot 3+
- PostgreSQL 15+ —Å pgvector
- Python 3.11+ –¥–ª—è RAG
- Docker –∏ Docker Compose
- Telegram Bot API

---

**–ö–æ–Ω—Ç–∞–∫—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:**
- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –¢–ó: —Å–º. –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ `/docs`
- API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `/docs/api.md`  
- –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ: `/docs/deployment.md`